---
title: "統計學與實習"
author: "Hochia"
output: 
  html_document:
    toc: true
    toc_float: true
    toc_depth: 3
date: 2019-10-10T21:13:14-05:00
categories: ["R"]
tags: ["R Markdown", "plot", "regression"]
---



<div id="迴圈敘述統計機率模型" class="section level1">
<h1>10/17 迴圈、敘述統計、機率模型</h1>
<div id="學習目標" class="section level2">
<h2>學習目標</h2>
<p>比較常態分佈</p>
<ol style="list-style-type: decimal">
<li><p>相同的平均值，不同的標準差</p></li>
<li><p>不同的平均值，相同的標準差</p></li>
</ol>
</div>
<div id="資料框-data-frame" class="section level2">
<h2>資料框 data frame</h2>
<p>建立資料框</p>
<p><strong>法一</strong></p>
<pre class="r"><code>df &lt;- data.frame(a = 1:3, b = 4:6)</code></pre>
<pre><code>#&gt;   a b
#&gt; 1 1 4
#&gt; 2 2 5
#&gt; 3 3 6</code></pre>
<p><strong>法二</strong></p>
<pre class="r"><code>df &lt;- data.frame(
  matrix(1:6, nrow = 3))

names(df) &lt;- c(&quot;a&quot;, &quot;b&quot;)</code></pre>
<pre><code>#&gt;   a b
#&gt; 1 1 4
#&gt; 2 2 5
#&gt; 3 3 6</code></pre>
<p><strong>法三</strong></p>
<pre class="r"><code>df &lt;- data.frame(
  matrix(0, nrow = 3, ncol = 2))

df[[1]] &lt;- 1:3
df[[2]] &lt;- 4:6</code></pre>
<pre><code>#&gt;   X1 X2
#&gt; 1  1  4
#&gt; 2  2  5
#&gt; 3  3  6</code></pre>
</div>
<div id="習題" class="section level2">
<h2>習題</h2>
<p>分別從 <span class="math inline">\(N(\mu = 0, \sigma = 1)\)</span>、<span class="math inline">\(N(\mu = 0, \sigma = 2)\)</span>、<span class="math inline">\(N(\mu = 5, \sigma = 1)\)</span> 抽出 1000 個樣本。</p>
<p>其中，<span class="math inline">\(N\)</span> 表示常態分佈，<span class="math inline">\(\mu\)</span> 表示平均值，<span class="math inline">\(\sigma\)</span> 表示標準差。</p>
<p>畫圖比較</p>
<ol style="list-style-type: decimal">
<li><p>相同的平均值，不同的標準差</p></li>
<li><p>不同的平均值，相同的標準差</p></li>
</ol>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-7-1.png" width="672" /><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-7-2.png" width="672" /></p>
<pre class="r"><code>df &lt;- data.frame(
  matrix(0, nrow = 1000, ncol = 2))

df[[1]] &lt;- rnorm(n = 1000, mean = 0, sd = 1)
df[[2]] &lt;- dnorm(df[[1]], mean = 0, sd = 1)</code></pre>
<p><code>rnorm()</code> 隨機抽樣</p>
<p><code>dnorm()</code> 抽出樣本的機率</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]])</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-9-1.png" width="672" /></p>
<p>依此類推，分別對三種分布抽出 1000 個樣本。</p>
<pre class="r"><code>df &lt;- data.frame(
  matrix(0, nrow = 1000, ncol = 6))

df[[1]] &lt;- rnorm(1000, mean = 0, sd = 1)
df[[2]] &lt;- dnorm(df[[1]], mean = 0, sd = 1)
df[[3]] &lt;- rnorm(____, mean = 0, sd = 2)
df[[4]] &lt;- dnorm(____, mean = 0, sd = 2)
df[[5]] &lt;- rnorm(____, mean = 5, sd = 1)
df[[6]] &lt;- dnorm(____, mean = 5, sd = 1)</code></pre>
<p>知道函數 argument 的順序，可以省略 argument。</p>
<pre class="r"><code># 這兩個一樣
df[[1]] &lt;- rnorm(1000, mean = 0, sd = 1)
df[[1]] &lt;- rnorm(1000, 0, 1)</code></pre>
<p>第一小題，在比較相同的平均值，不同的標準差的時候，會需要疊圖，疊圖的方法是使用 <code>par(new = T)</code>，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]])
par(new = T)
plot(x = df[[3]], y = df[[4]])</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-13-1.png" width="672" /></p>
<p>但是尺度可能不一樣，用 <code>xlim()</code>，<code>ylim()</code> 限制範圍。</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], xlim = c(-3,3), ylim = c(0,0.5))
par(new = T)
plot(x = df[[3]], y = df[[4]], xlim = c(-3,3), ylim = c(0,0.5))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-14-1.png" width="672" /></p>
<p>以此類推，第二小題，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], xlim = c(__,__), ylim = c(__,__))
par(new = T)
plot(x = _______, y = _______, xlim = c(__,__), ylim = c(__,__))</code></pre>
</div>
</div>
<div id="統計圖表繪製" class="section level1">
<h1>10/24 統計圖表繪製</h1>
<div id="review" class="section level2">
<h2>Review</h2>
<p><a href="https://rstudio.com/resources/cheatsheets/">Find the <strong>Base R</strong> cheetsheet</a></p>
<p>承 10/17 實習課的內容，介紹進階的資料視覺化方法。</p>
</div>
<div id="學習目標-1" class="section level2">
<h2>學習目標</h2>
<p>介紹 <code>plot()</code> 和 <code>ggplot()</code> 的做法。</p>
</div>
<div id="plot" class="section level2">
<h2><code>plot()</code></h2>
<pre class="r"><code>df &lt;- data.frame(
  matrix(0, nrow = 1000, ncol = 2))

df[[1]] &lt;- rnorm(1000, mean = 0, sd = 1)
df[[2]] &lt;- dnorm(df[[1]], mean = 0, sd = 1)

plot(x = df[[1]], y = df[[2]], 
     xlim = c(-3,3), ylim = c(0,0.5))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-17-1.png" width="672" /></p>
<pre class="r"><code>head(df)
#&gt;            X1        X2
#&gt; 1  0.75517685 0.2999665
#&gt; 2  1.35011401 0.1603586
#&gt; 3  0.02741055 0.3987924
#&gt; 4 -0.69196859 0.3140042
#&gt; 5  1.10508522 0.2166342
#&gt; 6  0.85615883 0.2765282</code></pre>
<p>圖表標題，<code>main = "__"</code>，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], 
     xlim = c(-3,3), ylim = c(0,0.5),
     main = &quot;Normal distribution&quot;,
     xlab = &quot;x&quot;, ylab = &quot;y&quot;)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>更改坐標軸名稱，<code>xlab = "__"</code>，<code>ylab = "__"</code>，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], 
     xlim = c(-3,3), ylim = c(0,0.5),
     xlab = &quot;x&quot;, ylab = &quot;y&quot;)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>顏色 <code>col = "____"</code>，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], 
     xlim = c(-3,3), ylim = c(0,0.5),
     col = &quot;plum&quot;)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-21-1.png" width="672" /></p>
<p>點的形狀 <code>pch = 20</code>，</p>
<pre class="r"><code>plot(x = df[[1]], y = df[[2]], 
     xlim = c(-3,3), ylim = c(0,0.5),
     pch = 20)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
</div>
<div id="ggplot" class="section level2">
<h2><code>ggplot()</code></h2>
<p><a href="https://rstudio.com/resources/cheatsheets/">Find the <strong>Data Visualization Cheat Sheet</strong></a></p>
<pre class="r"><code>install.packages(&quot;ggplot2&quot;)
library(ggplot2)</code></pre>
<pre class="r"><code>head(df)
#&gt;            X1        X2
#&gt; 1  0.75517685 0.2999665
#&gt; 2  1.35011401 0.1603586
#&gt; 3  0.02741055 0.3987924
#&gt; 4 -0.69196859 0.3140042
#&gt; 5  1.10508522 0.2166342
#&gt; 6  0.85615883 0.2765282</code></pre>
<p>基本</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-25-1.png" width="672" /></p>
<p>或者也可以寫成</p>
<pre class="r"><code>ggplot(df) +
  geom_point(aes(X1, X2))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>坐標軸名稱與圖表標題</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2)) +
  labs(x = &quot;x&quot;, y = &quot;y&quot;, title = &quot;Normal distribution&quot;)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>注意 argument 順序</p>
<pre class="r"><code>ggplot(df) +
  geom_point(aes(X1, X2)) +
  labs(&quot;Normal distribution&quot;, &quot;x&quot;, &quot;y&quot;)</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-28-1.png" width="672" /></p>
<p>座標軸範圍限制</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2)) +
  coord_cartesian(xlim = c(-3, 3), ylim = c(0, 0.5))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
<p>顏色</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2), color = &quot;orange&quot;) +
  coord_cartesian(xlim = c(-3, 3), ylim = c(0, 0.5))</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<p>畫圖主題</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2)) +
  theme_classic()</code></pre>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<p>疊圖方法</p>
<pre class="r"><code>ggplot(data = df) +
  geom_point(mapping = aes(X1, X2)) +
  geom_point(mapping = aes(X3, X4)) +
  theme_classic()</code></pre>
</div>
<div id="習題-1" class="section level2">
<h2>習題</h2>
<p>進一步視覺化 10/17 實習的題目，包括 (1) 圖表標題 (2) 坐標軸名稱 (3) 顏色</p>
<p>分別從 <span class="math inline">\(N(\mu = 0, \sigma = 1)\)</span>、<span class="math inline">\(N(\mu = 0, \sigma = 2)\)</span>、<span class="math inline">\(N(\mu = 5, \sigma = 1)\)</span> 抽出 1000 個樣本。</p>
<p>其中，<span class="math inline">\(N\)</span> 表示常態分佈，<span class="math inline">\(\mu\)</span> 表示平均值，<span class="math inline">\(\sigma\)</span> 表示標準差。</p>
<p>畫圖比較</p>
<ol style="list-style-type: decimal">
<li><p>相同的平均值，不同的標準差</p></li>
<li><p>不同的平均值，相同的標準差</p></li>
</ol>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-33-1.png" width="672" /></p>
</div>
</div>
<div id="區間估計" class="section level1">
<h1>10/31 區間估計</h1>
<div id="學習目標-2" class="section level2">
<h2>學習目標</h2>
<p>了解 <code>qnorm()</code> 和在 R 取“部分”的方法。</p>
<pre class="r"><code>qnorm(0, 0, 1)
#&gt; [1] -Inf
qnorm(0.25, 0, 1)
#&gt; [1] -0.6744898
qnorm(0.50, 0, 1)
#&gt; [1] 0
qnorm(0.75, 0, 1)
#&gt; [1] 0.6744898
qnorm(1, 0, 1)
#&gt; [1] Inf</code></pre>
<p>從簡單的樣本出發，</p>
<pre class="r"><code>df &lt;- data.frame(
  matrix(0, nrow = 10, ncol = 2))

df[[1]] &lt;- rnorm(10, mean = 0, sd = 1)
df[[2]] &lt;- dnorm(df[[1]], mean = 0, sd = 1)</code></pre>
<pre><code>#&gt;            X1        X2
#&gt; 1   1.0013045 0.2416551
#&gt; 2  -0.8092443 0.2875448
#&gt; 3   1.4118281 0.1472582
#&gt; 4  -1.0087602 0.2398511
#&gt; 5  -1.2646441 0.1793168
#&gt; 6   1.1189684 0.2133153
#&gt; 7   0.4694045 0.3573253
#&gt; 8   0.6176503 0.3296630
#&gt; 9  -0.7571745 0.2995137
#&gt; 10 -0.9785333 0.2471642</code></pre>
<p>取出小於 25 百分位的樣本，注意逗點位置，</p>
<pre class="r"><code>df[df$X1 &lt; qnorm(0.25, 0, 1),]
#&gt;            X1        X2
#&gt; 2  -0.8092443 0.2875448
#&gt; 4  -1.0087602 0.2398511
#&gt; 5  -1.2646441 0.1793168
#&gt; 9  -0.7571745 0.2995137
#&gt; 10 -0.9785333 0.2471642
df[df[[1]] &lt; qnorm(0.25, 0, 1),]
#&gt;            X1        X2
#&gt; 2  -0.8092443 0.2875448
#&gt; 4  -1.0087602 0.2398511
#&gt; 5  -1.2646441 0.1793168
#&gt; 9  -0.7571745 0.2995137
#&gt; 10 -0.9785333 0.2471642</code></pre>
<p>兩個以上的條件，<code>&amp;</code> 表示“且”，<code>|</code> 表示“或”，取出小於 25 百分位的樣本<strong>或</strong>大於 75百分位的樣本。</p>
<pre class="r"><code>df[df$X1 &lt; qnorm(0.25, 0, 1) | df$X1 &gt; qnorm(0.75, 0, 1),]
#&gt;            X1        X2
#&gt; 1   1.0013045 0.2416551
#&gt; 2  -0.8092443 0.2875448
#&gt; 3   1.4118281 0.1472582
#&gt; 4  -1.0087602 0.2398511
#&gt; 5  -1.2646441 0.1793168
#&gt; 6   1.1189684 0.2133153
#&gt; 9  -0.7571745 0.2995137
#&gt; 10 -0.9785333 0.2471642</code></pre>
</div>
<div id="習題-2" class="section level2">
<h2>習題</h2>
<p>從 <span class="math inline">\(N(\mu = 0, \sigma = 1)\)</span> 抽出 1000 個樣本，找出其雙尾 95% 信賴區間，區間內的樣本以紅色表示。</p>
<p><img src="/post/2019-10-10-TA-class_files/figure-html/unnamed-chunk-39-1.png" width="672" /></p>
</div>
</div>
